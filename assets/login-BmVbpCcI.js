import{s}from"./darkMode-B-Ivf8oh.js";document.addEventListener("DOMContentLoaded",async()=>{const{data:{session:e}}=await s.auth.getSession();if(e&&e.user){const r=e.user.id,{data:c}=await s.from("admin").select("id, adminrole").eq("id",r).single();if(c){c.adminrole==="LostAndFound Admin"?window.location.href="AdminLostFoundDashboard.html":window.location.href="AdminDashboard.html";return}const{data:m}=await s.from("users").select("id").eq("id",r).single();if(m){window.location.href="UserDashboard.html";return}}const n=document.getElementById("password"),o=document.getElementById("togglePassword"),a=document.getElementById("eyeIcon"),i=document.getElementById("eyeOffIcon");o&&o.addEventListener("click",()=>{n.type==="password"?(n.type="text",a.classList.remove("hidden"),i.classList.add("hidden")):(n.type="password",a.classList.add("hidden"),i.classList.remove("hidden"))})});const t=document.getElementById("loginError"),l=document.getElementById("errorText");function d(e){t&&l?(l.textContent=e,t.classList.remove("hidden"),t.classList.remove("animate-shake"),t.offsetWidth,t.classList.add("animate-shake")):alert(e)}function u(){t&&t.classList.add("hidden")}document.getElementById("loginForm").addEventListener("submit",async e=>{e.preventDefault(),u();const n=document.getElementById("email").value.trim(),o=document.getElementById("password").value;if(!n||!o){d("Please enter both email and password.");return}if(!navigator.onLine){d("Cannot connect to server. Please check your internet connection.");return}{d("Configuration error: Supabase key missing.");return}});
